#  upd-diysvr.md

(Add this content to draft0.)
## OAuth Authentication  

**Documentation and Registration**  
[OAUTH-1], sec. 4

OAuth includes a Consumer Key and matching Consumer Secret that together authenticate the Consumer (as opposed to the User) to the Service Provider. Consumer-specific identification allows the Service Provider to vary access levels to Consumers (such as un-throttled access to resources).  [OAUTH-1]

Service Providers SHOULD NOT rely on the Consumer Secret as a method to verify the Consumer identity, unless the Consumer Secret is known to be inaccessible to anyone other than the Consumer and the Service Provider. The Consumer Secret MAY be an empty string (for example when no Consumer verification is needed, or when verification is achieved through other means such as RSA). [OAUTH-1]  

**WWW-Authenticate Header**  
[OAUTH-1], sec. 5.4.2 

Service Providers MAY indicate their support for the extension by returning the OAuth HTTP WWW-Authenticate header upon Consumer requests for Protected Resources. As per **~[RFC2617]~** such a response MAY include additional HTTP WWW-Authenticate headers:

### Authenticating with OAuth  

OAuth authentication is the process in which Users grant access to their Protected Resources without sharing their credentials with the Consumer. OAuth uses Tokens generated by the Service Provider instead of the User's credentials in Protected Resources requests. The process uses two Token types:  

* Request Token:
  - Used by the Consumer to ask the User to authorize access to the Protected Resources. The User-authorized Request Token is exchanged for an Access Token, MUST only be used once, and MUST NOT be used for any other purpose. It is RECOMMENDED that Request Tokens have a limited lifetime.

* Access Token: 

  - Used by the Consumer to access the Protected Resources on behalf of the User. Access Tokens MAY limit access to certain Protected Resources, and MAY have a limited lifetime. Service Providers SHOULD allow Users to revoke Access Tokens. Only the Access Token SHALL be used to access the Protect Resources.

OAuth Authentication is done in three steps: 

1. The Consumer obtains an unauthorized Request Token.  
2. The User authorizes the Request Token.  
3. The Consumer exchanges the Request Token for an Access Token.  

## Obtaining User Authorization  
[OAUTH-1] sec.6.2  

The Consumer cannot use the Request Token until it has been authorized by the User. Obtaining User authorization includes the following steps:

### 6.2.1.  Consumer Directs the User to the Service Provider
In order for the Consumer to be able to exchange the Request Token for an Access Token, the Consumer MUST obtain approval from the User by directing the User to the Service Provider. The Consumer constructs an HTTP GET request to the Service Provider's User Authorization URL with the following parameter: …  

### 6.2.2. Service Provider Authenticates the User and Obtains Consent  

The Service Provider verifies the User's identity and asks for consent as detailed. OAuth does not specify how the Service Provider authenticates the User. However, it does define a set of REQUIRED steps: …  

**6.2.3.  Service Provider Directs the User Back to the Consumer**  

After the User authenticates with the Service Provider and grants permission for Consumer access, the Consumer MUST be notified that the Request Token has been authorized and ready to be exchanged for an Access Token. If the User denies access, the Consumer MAY be notified that the Request Token has been revoked.  

To make sure that the User granting access is the same User returning back to the Consumer to complete the process, the Service Provider MUST generate a verification code: an unguessable value passed to the Consumer via the User and REQUIRED to complete the process.  


## Refs  
[OAUTH-1] Internet Engineering Task Force (IETF), “OAuth Core 1.0 Revision A”, https://oauth.net/core/1.0a/   


### End 